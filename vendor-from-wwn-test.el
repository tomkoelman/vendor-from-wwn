(require 'vendor-from-wwn)
(require 'ert)
(ert-deftest vendor-from-wwn/nice-wwn--test()
  (should (equal (vendor-from-wwn/nice-wwn "10:00:00:00:C9:3d:a5:46") "[1][00:00:c9][3d:a5:46]"))
  (should (equal (vendor-from-wwn/nice-wwn "22:00:00:20:37:13:12:1a") "[2][00:20:37][13:12:1a]"))
  (should (equal (vendor-from-wwn/nice-wwn "50:06:04:85:c5:ed:aa:4c") "[5][00:60:48][5c:5e:da:a4:c]"))
  (should (equal (vendor-from-wwn/nice-wwn "60020F200000CA933D3D19CA000886A5")
                 "[6][00:20:f2][00:00:0c:a9:3][3d:3d:19:ca:00:08:86:a5]"))
  )

(ert-deftest oui-from-wwn--test()
  (should (equal (oui-from-wwn "10:00:00:00:C9:3d:a5:46") "0000c9"))
  (should (equal (oui-from-wwn "10:00:00:60:69:90:72:bc") "006069"))
  (should (equal (oui-from-wwn "22:00:00:20:37:13:12:1a") "002037"))
  (should (equal (oui-from-wwn "21:00:00:20:37:13:12:1a") "002037"))
  (should (equal (oui-from-wwn "20:00:00:20:37:13:12:1a") "002037"))
  (should (equal (oui-from-wwn "50:06:04:85:c5:ed:aa:4c") "006048"))
  (should (equal (oui-from-wwn "60:02:0f:20:00:00:ca:93:3f:2e:b2:d4:00:01:8a:54") "0020f2"))
  (should (equal (oui-from-wwn "60020F200000CA933D3D19CA000886A5") "0020f2"))
)

(ert-deftest vendor-sequence-from-wwn--test()
  (should (equal (vendor-sequence-from-wwn "10:00:00:00:C9:3d:a5:46") "3da546"))
  (should (equal (vendor-sequence-from-wwn "10:00:00:60:69:90:72:bc") "9072bc"))
  (should (equal (vendor-sequence-from-wwn "22:00:00:20:37:13:12:1a") "13121a"))
  (should (equal (vendor-sequence-from-wwn "21:00:00:20:37:13:12:1a") "13121a"))
  (should (equal (vendor-sequence-from-wwn "20:00:00:20:37:13:12:1a") "13121a"))
  (should (equal (vendor-sequence-from-wwn "50:06:04:85:c5:ed:aa:4c") "5c5edaa4c"))
  (should (equal (vendor-sequence-from-wwn "60:02:0f:20:00:00:ca:93:3f:2e:b2:d4:00:01:8a:54") "00000ca93"))
  (should (equal (vendor-sequence-from-wwn "60020F200000CA933D3D19CA000886A5") "00000ca93"))
)

(ert-deftest network-address-authority-from-wwn--test()
  (should (equal (network-address-authority-from-wwn "10:00:00:00:C9:3d:a5:46") "1"))
  (should (equal (network-address-authority-from-wwn "10:00:00:60:69:90:72:bc") "1"))
  (should (equal (network-address-authority-from-wwn "22:00:00:20:37:13:12:1a") "2"))
  (should (equal (network-address-authority-from-wwn "21:00:00:20:37:13:12:1a") "2"))
  (should (equal (network-address-authority-from-wwn "20:00:00:20:37:13:12:1a") "2"))
  (should (equal (network-address-authority-from-wwn "50:06:04:85:c5:ed:aa:4c") "5"))
  (should (equal (network-address-authority-from-wwn "60:02:0f:20:00:00:ca:93:3f:2e:b2:d4:00:01:8a:54") "6"))
  (should (equal (network-address-authority-from-wwn "60020F200000CA933D3D19CA000886A5") "6"))
)

(ert-deftest vendor-from-wwn--test()
  (should (equal (vendor-from-wwn "10:00:00:60:69:90:72:bc") "Brocade Communications Systems, Inc."))
  (should (equal (vendor-from-wwn "50:06:04:85:c5:ed:aa:4c") "EMC CORPORATION"))
)

(ert-deftest vendor-from-wwn/pairs-test()
  (should (equal (vendor-from-wwn/pairs "aabbcc") (list "aa" "bb" "cc")))
  (should (equal (vendor-from-wwn/pairs "aabbc") (list "aa" "bb" "c")))
  (should (equal (vendor-from-wwn/pairs "") nil))
  (should (equal (vendor-from-wwn/pairs "a") (list "a")))
)

(ert-deftest vendor-from-wwn/colon-separated-pairs-test()
  (should (equal (vendor-from-wwn/colon-separated-pairs "aabbcc") "aa:bb:cc"))
  (should (equal (vendor-from-wwn/colon-separated-pairs "aabbc") "aa:bb:c"))
  (should (equal (vendor-from-wwn/colon-separated-pairs "") ""))
  (should (equal (vendor-from-wwn/colon-separated-pairs "a") "a"))
)
